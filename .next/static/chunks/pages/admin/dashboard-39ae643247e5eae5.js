(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[36],{1920:(e,r,a)=>{"use strict";a.d(r,{A:()=>c});var t=a(7876),s=a(8230),l=a.n(s),n=a(9454);function c(){let e=n.A.get("token");return(0,t.jsxs)("nav",{className:"flex justify-between p-4 bg-black text-white",children:[(0,t.jsx)(l(),{href:"/",children:"\uD83E\uDE91 Corporate Chairs"}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)(l(),{href:"/",children:"Home"}),(0,t.jsx)(l(),{href:"/cart",children:"Cart"}),(0,t.jsx)(l(),{href:"/admin/dashboard",children:"Admin"}),e?(0,t.jsx)("button",{onClick:()=>{n.A.remove("token"),window.location.href="/"},children:"Logout"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l(),{href:"/login",children:"Login"}),(0,t.jsx)(l(),{href:"/register",children:"Register"})]})]})]})}},3460:(e,r,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return a(6864)}])},6864:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>d});var t=a(7876),s=a(4232),l=a(1040),n=a(9454),c=a(1920);function d(){let[e,r]=(0,s.useState)([]),[a,d]=(0,s.useState)([]),[i,o]=(0,s.useState)({name:"",description:"",price:"",category:"",image:"",stock:""}),h=n.A.get("token");(0,s.useEffect)(()=>{h?(u(),p()):window.location.href="/login"},[]);let u=async()=>{r((await l.A.get("http://localhost:5000/api/products")).data)},p=async()=>{try{let e=await l.A.get("http://localhost:5000/api/orders",{headers:{Authorization:"Bearer ".concat(h)}});d(e.data)}catch(e){console.error("Not admin or unauthorized")}},m=async()=>{try{await l.A.post("http://localhost:5000/api/products",i,{headers:{Authorization:"Bearer ".concat(h)}}),u(),o({name:"",description:"",price:"",category:"",image:"",stock:""})}catch(e){alert("Only admin can add products")}},x=async e=>{try{await l.A.delete("http://localhost:5000/api/products/".concat(e),{headers:{Authorization:"Bearer ".concat(h)}}),u()}catch(e){alert("Only admin can delete products")}};return(0,t.jsxs)("div",{children:[(0,t.jsx)(c.A,{}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-center mt-4",children:"⚙️ Admin Dashboard"}),(0,t.jsxs)("div",{className:"max-w-md mx-auto mt-6 p-4 border rounded bg-white",children:[(0,t.jsx)("h2",{className:"font-bold mb-3",children:"Add New Product"}),(0,t.jsx)("input",{placeholder:"Name",value:i.name,onChange:e=>o({...i,name:e.target.value}),className:"border p-2 w-full mb-2"}),(0,t.jsx)("input",{placeholder:"Description",value:i.description,onChange:e=>o({...i,description:e.target.value}),className:"border p-2 w-full mb-2"}),(0,t.jsx)("input",{placeholder:"Price",value:i.price,onChange:e=>o({...i,price:e.target.value}),className:"border p-2 w-full mb-2"}),(0,t.jsx)("input",{placeholder:"Category",value:i.category,onChange:e=>o({...i,category:e.target.value}),className:"border p-2 w-full mb-2"}),(0,t.jsx)("input",{placeholder:"Image URL",value:i.image,onChange:e=>o({...i,image:e.target.value}),className:"border p-2 w-full mb-2"}),(0,t.jsx)("input",{placeholder:"Stock",value:i.stock,onChange:e=>o({...i,stock:e.target.value}),className:"border p-2 w-full mb-2"}),(0,t.jsx)("button",{onClick:m,className:"bg-blue-500 text-white px-4 py-2 rounded",children:"Add Product"})]}),(0,t.jsx)("h2",{className:"text-xl font-bold mt-8 mb-4 text-center",children:"Products"}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-4 p-6",children:e.map(e=>(0,t.jsxs)("div",{className:"border p-3 rounded bg-gray-100",children:[(0,t.jsx)("p",{children:(0,t.jsx)("b",{children:e.name})}),(0,t.jsxs)("p",{children:["₹",e.price]}),(0,t.jsx)("button",{onClick:()=>x(e._id),className:"bg-red-500 text-white px-2 py-1 rounded mt-2",children:"Delete"})]},e._id))}),(0,t.jsx)("h2",{className:"text-xl font-bold mt-8 mb-4 text-center",children:"Orders"}),(0,t.jsx)("div",{className:"p-6",children:0===a.length?(0,t.jsx)("p",{children:"No orders yet"}):a.map(e=>{var r,a;return(0,t.jsxs)("div",{className:"border p-3 mb-3 rounded bg-white",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("b",{children:"Order ID:"})," ",e._id]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("b",{children:"User:"})," ",null==(r=e.user)?void 0:r.name," (",null==(a=e.user)?void 0:a.email,")"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("b",{children:"Total:"})," ₹",e.totalPrice]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("b",{children:"Status:"})," ",e.isPaid?"Paid":"Pending"]})]},e._id)})})]})}}},e=>{e.O(0,[500,636,593,792],()=>e(e.s=3460)),_N_E=e.O()}]);